import React, { useEffect, useRef, useState } from 'react';
import { useChat } from 'ai/react';
import { Route, Routes, Navigate } from 'react-router-dom';
import { getApiUrl } from './config';
import { Card } from './components/ui/card';
import { ScrollArea } from './components/ui/scroll-area';
import Splash from './components/Splash';
import GooseMessage from './components/GooseMessage';
import UserMessage from './components/UserMessage';
import Input from './components/Input';
import Tabs from './components/Tabs';
import MoreMenu from './components/MoreMenu';

export interface Chat {
  id: number;
  title: string;
  messages: Array<{
    id: string;
    role: 'function' | 'system' | 'user' | 'assistant' | 'data' | 'tool';
    content: string;
  }>;
}

enum Working {
  Idle = 'Idle',
  Working = 'Working',
}

const WingView: React.FC<{ onExpand: () => void; status: string }> = ({ onExpand, status }) => {
  return (
  <div
    onClick={onExpand}
    className="flex items-center w-full h-20 bg-gradient-to-r from-gray-100 via-gray-200 to-gray-300 shadow-md rounded-lg p-4 cursor-pointer hover:shadow-lg transition-all duration-200">      
        {/* SVG Icon */}
        <div className="w-10 h-10 mr-4 flex-shrink-0">
          <SvgBird/>
        </div>
      

      {/* Status Text */}
      <div className="flex flex-col text-left">
        <span className="text-sm text-gray-600 font-medium">{status}</span>
      </div>
    </div>
  );
};


function ChatContent({
  chats,
  setChats,
  selectedChatId,
  setSelectedChatId,
  initialQuery,
  setStatus,
  setInflight,
}: {
  chats: Chat[];
  setChats: React.Dispatch<React.SetStateAction<Chat[]>>;
  selectedChatId: number;
  setSelectedChatId: React.Dispatch<React.SetStateAction<number>>;
  initialQuery: string | null;
  setStatus: React.Dispatch<React.SetStateAction<string>>;
  
}) {
  const chat = chats.find((c: Chat) => c.id === selectedChatId);

  //window.electron.logInfo('chats' + JSON.stringify(chats, null, 2));

  const [messageMetadata, setMessageMetadata] = useState<Record<string, string[]>>({});

  const {
    messages,
    input,
    handleInputChange,
    handleSubmit,
    append,
    stop,
    isLoading,
    error
  } = useChat({
    api: getApiUrl('/reply'),
    initialMessages: chat?.messages || [],
    onToolCall: ({ toolCall }) => {
      setStatus(`Executing tool: ${toolCall.toolName}`);
      // Optionally handle tool call result here
    },
    onResponse: (response) => {
      if (!response.ok) {
        setStatus('An error occurred while receiving the response.');
      } else {
        setStatus('Receiving response...');
      }
    },
    onFinish: async (message, options) => {
      setStatus('Goose is ready for the next task.');

      const promptTemplates = [
        "Take a look at this content, if this looks like it could be asking for a confirmation, return QUESTION. If it looks like it is a list of options or plans to choose from, return OPTIONS. It can't just be a list, but clearly must be asking the user to pick one or more of the plan or option alternatives, otherwise return READY. \n ### Message Content:\n" + message.content,
        "If the content is clearly a list of distinct options or plans of action to choose from, and not just a list of things, but clearly a list of things to choose one from from, taking into account the Message Content alone, try to format it in a json array, like this JSON array of objects of the form optionTitle:string, optionDescription:string (markdown).\n If is not a list of options or plans to choose from, then return empty list.\n ### Message Content:\n" + message.content,
      ];

      const fetchResponses = await askAi(promptTemplates);

      setMessageMetadata(prev => ({ ...prev, [message.id]: fetchResponses }));

      console.log('All responses:', fetchResponses);
    },
  });

  // Update chat messages when they change
  useEffect(() => {
    const updatedChats = chats.map((c) =>
      c.id === selectedChatId ? { ...c, messages } : c
    );
    setChats(updatedChats);
  }, [messages, selectedChatId]);

  const initialQueryAppended = useRef(false);
  useEffect(() => {
    if (initialQuery && !initialQueryAppended.current) {
      append({ role: 'user', content: initialQuery });
      initialQueryAppended.current = true;
    }
  }, [initialQuery]);

  if (error) {
    console.log('Error:', error);
  }

  return (
    <div className="chat-content flex flex-col w-screen h-screen bg-window-gradient items-center justify-center p-[10px]">
      <div className="flex w-screen">
        <div className="flex-1">
          <Tabs
            chats={chats}
            selectedChatId={selectedChatId}
            setSelectedChatId={setSelectedChatId}
            setChats={setChats}
          />
        </div>
        <div className="flex">
          <MoreMenu
            className="absolute top-2 right-2"
            onStopGoose={() => {
              stop();
            }}
            onClearContext={() => {
              append({
                id: Date.now().toString(),
                role: 'system',
                content: 'Context cleared',
              });
            }}
            onRestartGoose={() => {
              append({
                id: Date.now().toString(),
                role: 'system',
                content: 'Goose restarted',
              });
            }}
          />
        </div>
      </div>
      <Card className="flex flex-col flex-1 h-[calc(100vh-95px)] w-full bg-card-gradient mt-0 border-none shadow-xl rounded-2xl relative">
        {messages.length === 0 ? (
          <Splash append={append} />
        ) : (
          <ScrollArea className="flex-1 px-[10px]">
            <div className="block h-10" />
            {messages.map((message) => (
              <div key={message.id}>
                {message.role === 'user' ? (
                  <UserMessage message={message} />
                ) : (
                  <GooseMessage
                    message={message}
                    messages={messages}
                    metadata={messageMetadata[message.id]}
                    append={append}
                  />
                )}
              </div>
            ))}
            {isLoading && (
              <div className="flex items-center justify-center p-4">
                <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900" />
              </div>
            )}
            {error && (
              <div className="flex items-center justify-center p-4">
                <div className="text-red-500 bg-red-100 p-3 rounded-lg">
                  {error.message|| 'An error occurred while processing your request'}
                </div>
              </div>
            )}
            <div className="block h-10" />
          </ScrollArea>
        )}

        <Input
          handleSubmit={handleSubmit}
          handleInputChange={handleInputChange}
          input={input}
          disabled={isLoading}
        />
      </Card>
    </div>
  );
}

export default function ChatWindow() {
  // Get initial query and history from URL parameters
  const searchParams = new URLSearchParams(window.location.search);
  const initialQuery = searchParams.get('initialQuery');
  //window.electron.logInfo('initialQuery: ' + initialQuery);
  const historyParam = searchParams.get('history');
  const initialHistory = historyParam
    ? JSON.parse(decodeURIComponent(historyParam))
    : [];

  const [chats, setChats] = useState<Chat[]>(() => {
    const firstChat = {
      id: 1,
      title: initialQuery || 'Chat 1',
      messages: initialHistory.length > 0 ? initialHistory : [],
    };
    return [firstChat];
  });

  const [selectedChatId, setSelectedChatId] = useState(1);

  const [mode, setMode] = useState<'expanded' | 'compact'>(
    initialQuery ? 'compact' : 'expanded'
  );

  const [status, setStatus] = useState('Goose is ready for the next task.');
  const [inFlight, setInflight] = useState('READY');

  const toggleMode = () => {
    const newMode = mode === 'expanded' ? 'compact' : 'expanded';
    console.log(`Toggle to ${newMode}`);
    setMode(newMode);
  };

  window.electron.logInfo('ChatWindow loaded');

  return (
    <div className="relative w-screen h-screen overflow-hidden bg-transparent flex flex-col">
      {/* Always render ChatContent but control its visibility */}
      <div style={{ display: mode === 'expanded' ? 'block' : 'none' }}>
        <Routes>
          <Route
            path="/chat/:id"
            element={
              <ChatContent
                key={selectedChatId}
                chats={chats}
                setChats={setChats}
                selectedChatId={selectedChatId}
                setSelectedChatId={setSelectedChatId}
                initialQuery={initialQuery}
                setStatus={setStatus}
                inFlight={setInflight}
              />
            }
          />
          <Route path="*" element={<Navigate to="/chat/1" replace />} />
        </Routes>
      </div>

      {/* Always render WingView but control its visibility */}
      <WingView onExpand={toggleMode} status={status} inFlight={inFlight} />
    </div>
  );
}

/**
 * Utillity to ask the LLM any question to clarify without wider context.
 */
async function askAi(promptTemplates: string[]) {
  console.log('askAi called...');
  const responses = await Promise.all(promptTemplates.map(async (template) => {
    const response = await fetch(getApiUrl('/ask'), {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ prompt: template })
    });

    if (!response.ok) {
      throw new Error('Failed to get response');
    }

    const data = await response.json();
    console.log('ask Response:', data.response);

    return data.response;
  }));

  return responses;
}

const SvgBird = () => (
  <svg width="45" height="39" viewBox="0 0 45 39" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M26.4047 17.9373C27.3193 17.5522 28.3302 17.3596 29.293 17.6003C29.7791 17.7218 30.4615 18.1747 31.111 18.6057C31.748 19.0283 32.3532 19.43 32.7107 19.4777C33.0285 19.52 33.4581 19.4971 33.8805 19.4746C34.4182 19.446 34.9443 19.418 35.2139 19.5258C35.4268 19.611 35.6304 19.9223 35.8537 20.2638C36.1351 20.6942 36.4479 21.1727 36.8506 21.3069C37.0202 21.3634 37.2005 21.412 37.3721 21.4583C37.9307 21.6088 38.3967 21.7343 38.1021 22.0289C37.717 22.414 35.3583 22.6547 35.1176 22.5585C34.9949 22.5094 35.0098 22.3852 35.0284 22.2306C35.0463 22.082 35.0676 21.9053 34.9732 21.7401C34.8829 21.5821 34.708 21.3289 34.5426 21.0896C34.3554 20.8185 34.1804 20.5652 34.1549 20.4885C33.9623 20.3441 33.144 20.1997 33.144 20.3923C33.144 20.5848 33.3847 21.9808 33.5772 22.1734C33.6063 22.2024 33.6354 22.2304 33.6628 22.2568C33.8169 22.4051 33.9187 22.503 33.6735 22.4622C33.3847 22.414 31.748 21.7401 31.2185 21.2106C30.689 20.6811 29.9188 19.959 29.2448 19.959C28.871 19.959 27.9491 21.1144 27.0625 22.2255C26.3509 23.1174 25.662 23.9808 25.2976 24.1951C24.4792 24.6765 21.7835 25.7837 20.2431 25.8799C18.7027 25.9762 16.8254 25.9762 16.7772 25.4948C16.7291 25.0135 16.9217 24.5802 17.6437 24.6765C18.3658 24.7728 24.2867 23.6656 25.9234 21.9808C26.3025 21.5905 26.612 21.2802 26.8612 21.0304C27.6877 20.2016 27.8524 20.0365 27.7044 19.8146C27.6538 19.7386 27.5032 19.5927 27.3183 19.4135C26.8006 18.9119 26.0145 18.1501 26.4047 17.9373ZM34.8264 20.5249C34.8275 20.5419 34.8288 20.5615 34.8288 20.5848C34.8288 20.7292 34.8769 20.8255 35.0213 20.8736C35.1657 20.9218 35.262 20.7292 35.2139 20.5848C35.1657 20.4404 35.1176 20.296 35.0213 20.296C34.8195 20.4171 34.8207 20.4366 34.8264 20.5249Z" fill="#7F7F7F"/>
  <path d="M25.8272 13.4604C26.5492 14.1343 25.8272 17.167 25.779 17.3595C25.5615 18.2298 24.0352 17.619 23.565 16.8551C23.3126 16.4449 23.1018 15.9636 23.0833 15.4822C23.0352 14.2306 22.3131 13.0272 22.1206 12.4495C21.928 11.8719 19.5212 10.9573 18.414 10.6684C17.3068 10.3796 17.1143 8.3097 17.2587 8.02087C17.4031 7.73205 21.4948 10.524 23.0833 11.2461C24.6719 11.9681 25.1051 12.7865 25.8272 13.4604Z" fill="#7F7F7F"/>
  <path d="M16.5848 24.0024C16.2478 24.0024 16.0553 24.195 15.6702 24.8208C15.253 25.3824 14.3704 26.5441 14.1779 26.6981C13.9372 26.8907 13.7447 26.5056 13.0707 26.4575C12.3968 26.4093 11.771 27.5646 11.4822 27.9016C11.1934 28.2385 12.7819 28.3348 14.3704 27.5646C15.959 26.7944 16.8255 24.7245 16.9699 24.3875C17.1143 24.0506 16.9217 24.0024 16.5848 24.0024Z" fill="#7F7F7F"/>
  <path d="M20.2432 12.3532C21.4948 12.8827 21.8317 13.6529 21.8799 14.8563C21.9912 17.6399 22.2769 20.3073 19.7272 21.4296C17.9018 22.2331 16.1005 22.9204 15.7664 23.0397C15.0925 23.2804 14.6593 23.5211 14.3704 23.9062C14.0816 24.2913 14.5149 24.3876 14.7555 24.7727C14.9962 25.1578 14.0816 25.6391 13.2151 25.591C12.3487 25.5429 11.1934 24.8208 11.1452 24.195C11.0971 23.5692 13.4558 22.9434 14.3704 22.7027C15.2851 22.4621 16.5848 21.1623 17.4031 20.8254C18.2214 20.4884 17.3068 20.681 17.0661 20.4403C16.8255 20.1996 16.6329 19.0924 16.5848 18.5629C16.5366 18.0334 15.959 17.1669 15.7664 16.9262C15.5739 16.6856 18.1733 16.83 18.2696 16.6374C18.3659 16.4449 16.5848 16.493 15.4295 16.3005C14.2742 16.1079 13.7928 15.3377 13.6484 15.097C13.504 14.8563 17.7401 15.5784 17.9808 15.3377C18.2214 15.097 16.1997 15.097 15.2369 14.9045C14.2742 14.7119 13.3114 14.5194 12.83 14.1824C12.3487 13.8455 11.9154 13.0271 12.3005 13.2197C12.6856 13.4122 17.4031 14.2787 17.7401 14.0861C18.077 13.8936 12.9263 12.7383 12.1561 12.4495C11.3859 12.1606 10.712 10.8128 10.6157 10.524C10.5194 10.2351 11.7229 11.1016 12.3005 11.2942L12.3005 11.2942C12.8782 11.4867 16.9217 12.8346 17.4031 12.7383C17.8845 12.642 13.3596 11.0535 12.0598 10.524C10.7601 9.99446 10.375 8.5022 10.2788 8.1171C10.1825 7.732 11.3859 8.55034 12.0598 8.98357C12.7338 9.41681 18.9916 11.8237 20.2432 12.3532Z" fill="#7F7F7F"/>
  </svg>
);

const SvgWorking = () => (
  <svg width="415" height="116" viewBox="0 0 415 116" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="415" height="116" rx="14" fill="white" fill-opacity="0.8"/>
  <path d="M16 20.35L22 17.25L28 20.35M16 20.35L22 23.25M16 20.35V26.75L22 29.75M28 20.35L22 23.25M28 20.35V26.75L22 29.75M22 23.25V29.75" stroke="url(#paint0_linear_5_2770)" stroke-width="2" stroke-linecap="round"/>
  <path d="M32.9588 28V19.2727H36.0696C36.7486 19.2727 37.3111 19.3963 37.7571 19.6435C38.2031 19.8906 38.5369 20.2287 38.7585 20.6577C38.9801 21.0838 39.0909 21.5639 39.0909 22.098C39.0909 22.6349 38.9787 23.1179 38.7543 23.5469C38.5327 23.973 38.1974 24.3111 37.7486 24.5611C37.3026 24.8082 36.7415 24.9318 36.0653 24.9318H33.9261V23.8153H35.946C36.375 23.8153 36.723 23.7415 36.9901 23.5938C37.2571 23.4432 37.4531 23.2386 37.5781 22.9801C37.7031 22.7216 37.7656 22.4276 37.7656 22.098C37.7656 21.7685 37.7031 21.4759 37.5781 21.2202C37.4531 20.9645 37.2557 20.7642 36.9858 20.6193C36.7188 20.4744 36.3665 20.402 35.929 20.402H34.2756V28H32.9588ZM40.5323 28V21.4545H41.7638V22.4943H41.832C41.9513 22.142 42.1616 21.8651 42.4627 21.6634C42.7667 21.4588 43.1104 21.3565 43.494 21.3565C43.5735 21.3565 43.6673 21.3594 43.7752 21.3651C43.886 21.3707 43.9727 21.3778 44.0352 21.3864V22.6051C43.984 22.5909 43.8931 22.5753 43.7624 22.5582C43.6317 22.5384 43.5011 22.5284 43.3704 22.5284C43.0692 22.5284 42.8008 22.5923 42.565 22.7202C42.332 22.8452 42.1474 23.0199 42.011 23.2443C41.8746 23.4659 41.8065 23.7187 41.8065 24.0028V28H40.5323ZM47.6605 28.1321C47.0469 28.1321 46.5114 27.9915 46.054 27.7102C45.5966 27.429 45.2415 27.0355 44.9886 26.5298C44.7358 26.0241 44.6094 25.4332 44.6094 24.7571C44.6094 24.0781 44.7358 23.4844 44.9886 22.9759C45.2415 22.4673 45.5966 22.0724 46.054 21.7912C46.5114 21.5099 47.0469 21.3693 47.6605 21.3693C48.2741 21.3693 48.8097 21.5099 49.267 21.7912C49.7244 22.0724 50.0795 22.4673 50.3324 22.9759C50.5852 23.4844 50.7116 24.0781 50.7116 24.7571C50.7116 25.4332 50.5852 26.0241 50.3324 26.5298C50.0795 27.0355 49.7244 27.429 49.267 27.7102C48.8097 27.9915 48.2741 28.1321 47.6605 28.1321ZM47.6648 27.0625C48.0625 27.0625 48.392 26.9574 48.6534 26.7472C48.9148 26.5369 49.108 26.2571 49.233 25.9077C49.3608 25.5582 49.4247 25.1733 49.4247 24.7528C49.4247 24.3352 49.3608 23.9517 49.233 23.6023C49.108 23.25 48.9148 22.9673 48.6534 22.7543C48.392 22.5412 48.0625 22.4347 47.6648 22.4347C47.2642 22.4347 46.9318 22.5412 46.6676 22.7543C46.4063 22.9673 46.2116 23.25 46.0838 23.6023C45.9588 23.9517 45.8963 24.3352 45.8963 24.7528C45.8963 25.1733 45.9588 25.5582 46.0838 25.9077C46.2116 26.2571 46.4063 26.5369 46.6676 26.7472C46.9318 26.9574 47.2642 27.0625 47.6648 27.0625ZM54.891 28.1321C54.2575 28.1321 53.712 27.9886 53.2546 27.7017C52.8001 27.4119 52.4506 27.0128 52.2063 26.5043C51.962 25.9957 51.8398 25.4134 51.8398 24.7571C51.8398 24.0923 51.9648 23.5057 52.2148 22.9972C52.4648 22.4858 52.8171 22.0866 53.2717 21.7997C53.7262 21.5128 54.2617 21.3693 54.8782 21.3693C55.3754 21.3693 55.8185 21.4616 56.2077 21.6463C56.5969 21.8281 56.9109 22.0838 57.1495 22.4134C57.391 22.7429 57.5344 23.1278 57.5799 23.5682H56.3398C56.2717 23.2614 56.1154 22.9972 55.8711 22.7756C55.6296 22.554 55.3058 22.4432 54.8995 22.4432C54.5444 22.4432 54.2333 22.5369 53.9663 22.7244C53.7021 22.9091 53.4961 23.1733 53.3484 23.517C53.2006 23.858 53.1268 24.2614 53.1268 24.7273C53.1268 25.2045 53.1992 25.6165 53.3441 25.9631C53.489 26.3097 53.6935 26.5781 53.9577 26.7685C54.2248 26.9588 54.5387 27.054 54.8995 27.054C55.141 27.054 55.3597 27.0099 55.5558 26.9219C55.7546 26.831 55.9208 26.7017 56.0543 26.5341C56.1907 26.3665 56.2859 26.1648 56.3398 25.929H57.5799C57.5344 26.3523 57.3967 26.7301 57.1665 27.0625C56.9364 27.3949 56.6282 27.6562 56.2418 27.8466C55.8583 28.0369 55.408 28.1321 54.891 28.1321ZM61.7635 28.1321C61.1186 28.1321 60.5632 27.9943 60.0973 27.7188C59.6342 27.4403 59.2763 27.0497 59.0234 26.5469C58.7734 26.0412 58.6484 25.4489 58.6484 24.7699C58.6484 24.0994 58.7734 23.5085 59.0234 22.9972C59.2763 22.4858 59.6286 22.0866 60.0803 21.7997C60.5348 21.5128 61.0661 21.3693 61.674 21.3693C62.0433 21.3693 62.4013 21.4304 62.7479 21.5526C63.0945 21.6747 63.4055 21.8665 63.6811 22.1278C63.9567 22.3892 64.174 22.7287 64.3331 23.1463C64.4922 23.5611 64.5717 24.0653 64.5717 24.6591V25.1108H59.3686V24.1562H63.3232C63.3232 23.821 63.255 23.5241 63.1186 23.2656C62.9822 23.0043 62.7905 22.7983 62.5433 22.6477C62.299 22.4972 62.0121 22.4219 61.6825 22.4219C61.3246 22.4219 61.0121 22.5099 60.745 22.6861C60.4808 22.8594 60.2763 23.0866 60.1314 23.3679C59.9893 23.6463 59.9183 23.9489 59.9183 24.2756V25.0213C59.9183 25.4588 59.995 25.831 60.1484 26.1378C60.3047 26.4446 60.522 26.679 60.8004 26.8409C61.0788 27 61.4041 27.0795 61.7763 27.0795C62.0178 27.0795 62.2379 27.0455 62.4368 26.9773C62.6357 26.9062 62.8075 26.8011 62.9524 26.6619C63.0973 26.5227 63.2081 26.3509 63.2848 26.1463L64.4908 26.3636C64.3942 26.7187 64.2209 27.0298 63.9709 27.2969C63.7237 27.5611 63.4126 27.767 63.0376 27.9148C62.6655 28.0597 62.2408 28.1321 61.7635 28.1321ZM70.8903 23.0526L69.7354 23.2571C69.6871 23.1094 69.6104 22.9687 69.5053 22.8352C69.4031 22.7017 69.2638 22.5923 69.0877 22.5071C68.9116 22.4219 68.6914 22.3793 68.4272 22.3793C68.0664 22.3793 67.7653 22.4602 67.5238 22.6222C67.2823 22.7812 67.1616 22.9872 67.1616 23.2401C67.1616 23.4588 67.2425 23.6349 67.4045 23.7685C67.5664 23.902 67.8278 24.0114 68.1886 24.0966L69.2283 24.3352C69.8306 24.4744 70.2795 24.6889 70.5749 24.9787C70.8704 25.2685 71.0181 25.6449 71.0181 26.108C71.0181 26.5 70.9045 26.8494 70.6772 27.1562C70.4528 27.4602 70.1388 27.6989 69.7354 27.8722C69.3349 28.0455 68.8704 28.1321 68.342 28.1321C67.609 28.1321 67.011 27.9759 66.5479 27.6634C66.0849 27.348 65.8008 26.9006 65.6957 26.321L66.9272 26.1335C67.0039 26.4545 67.1616 26.6974 67.4002 26.8622C67.6388 27.0241 67.9499 27.1051 68.3335 27.1051C68.7511 27.1051 69.0849 27.0185 69.3349 26.8452C69.5849 26.669 69.7099 26.4545 69.7099 26.2017C69.7099 25.9972 69.6332 25.8253 69.4798 25.6861C69.3292 25.5469 69.0977 25.4418 68.7852 25.3707L67.6772 25.1278C67.0664 24.9886 66.6147 24.767 66.3221 24.4631C66.0323 24.1591 65.8874 23.7741 65.8874 23.3082C65.8874 22.9219 65.9954 22.5838 66.2113 22.294C66.4272 22.0043 66.7255 21.7784 67.1062 21.6165C67.4869 21.4517 67.9229 21.3693 68.4144 21.3693C69.1218 21.3693 69.6786 21.5227 70.0849 21.8295C70.4911 22.1335 70.7596 22.5412 70.8903 23.0526ZM77.3239 23.0526L76.169 23.2571C76.1207 23.1094 76.044 22.9687 75.9389 22.8352C75.8366 22.7017 75.6974 22.5923 75.5213 22.5071C75.3452 22.4219 75.125 22.3793 74.8608 22.3793C74.5 22.3793 74.1989 22.4602 73.9574 22.6222C73.7159 22.7812 73.5952 22.9872 73.5952 23.2401C73.5952 23.4588 73.6761 23.6349 73.8381 23.7685C74 23.902 74.2614 24.0114 74.6222 24.0966L75.6619 24.3352C76.2642 24.4744 76.7131 24.6889 77.0085 24.9787C77.304 25.2685 77.4517 25.6449 77.4517 26.108C77.4517 26.5 77.3381 26.8494 77.1108 27.1562C76.8864 27.4602 76.5724 27.6989 76.169 27.8722C75.7685 28.0455 75.304 28.1321 74.7756 28.1321C74.0426 28.1321 73.4446 27.9759 72.9815 27.6634C72.5185 27.348 72.2344 26.9006 72.1293 26.321L73.3608 26.1335C73.4375 26.4545 73.5952 26.6974 73.8338 26.8622C74.0724 27.0241 74.3835 27.1051 74.767 27.1051C75.1847 27.1051 75.5185 27.0185 75.7685 26.8452C76.0185 26.669 76.1435 26.4545 76.1435 26.2017C76.1435 25.9972 76.0668 25.8253 75.9134 25.6861C75.7628 25.5469 75.5312 25.4418 75.2188 25.3707L74.1108 25.1278C73.5 24.9886 73.0483 24.767 72.7557 24.4631C72.4659 24.1591 72.321 23.7741 72.321 23.3082C72.321 22.9219 72.429 22.5838 72.6449 22.294C72.8608 22.0043 73.1591 21.7784 73.5398 21.6165C73.9205 21.4517 74.3565 21.3693 74.848 21.3693C75.5554 21.3693 76.1122 21.5227 76.5185 21.8295C76.9247 22.1335 77.1932 22.5412 77.3239 23.0526ZM86.9332 23.0526L85.7784 23.2571C85.7301 23.1094 85.6534 22.9687 85.5483 22.8352C85.446 22.7017 85.3068 22.5923 85.1307 22.5071C84.9545 22.4219 84.7344 22.3793 84.4702 22.3793C84.1094 22.3793 83.8082 22.4602 83.5668 22.6222C83.3253 22.7812 83.2045 22.9872 83.2045 23.2401C83.2045 23.4588 83.2855 23.6349 83.4474 23.7685C83.6094 23.902 83.8707 24.0114 84.2315 24.0966L85.2713 24.3352C85.8736 24.4744 86.3224 24.6889 86.6179 24.9787C86.9134 25.2685 87.0611 25.6449 87.0611 26.108C87.0611 26.5 86.9474 26.8494 86.7202 27.1562C86.4957 27.4602 86.1818 27.6989 85.7784 27.8722C85.3778 28.0455 84.9134 28.1321 84.3849 28.1321C83.652 28.1321 83.054 27.9759 82.5909 27.6634C82.1278 27.348 81.8438 26.9006 81.7386 26.321L82.9702 26.1335C83.0469 26.4545 83.2045 26.6974 83.4432 26.8622C83.6818 27.0241 83.9929 27.1051 84.3764 27.1051C84.794 27.1051 85.1278 27.0185 85.3778 26.8452C85.6278 26.669 85.7528 26.4545 85.7528 26.2017C85.7528 25.9972 85.6761 25.8253 85.5227 25.6861C85.3722 25.5469 85.1406 25.4418 84.8281 25.3707L83.7202 25.1278C83.1094 24.9886 82.6577 24.767 82.3651 24.4631C82.0753 24.1591 81.9304 23.7741 81.9304 23.3082C81.9304 22.9219 82.0384 22.5838 82.2543 22.294C82.4702 22.0043 82.7685 21.7784 83.1491 21.6165C83.5298 21.4517 83.9659 21.3693 84.4574 21.3693C85.1648 21.3693 85.7216 21.5227 86.1278 21.8295C86.5341 22.1335 86.8026 22.5412 86.9332 23.0526ZM91.5174 21.4545V22.4773H87.9421V21.4545H91.5174ZM88.9009 19.8864H90.1751V26.0781C90.1751 26.3253 90.212 26.5114 90.2859 26.6364C90.3597 26.7585 90.4549 26.8423 90.5714 26.8878C90.6907 26.9304 90.82 26.9517 90.9592 26.9517C91.0614 26.9517 91.1509 26.9446 91.2276 26.9304C91.3043 26.9162 91.364 26.9048 91.4066 26.8963L91.6367 27.9489C91.5629 27.9773 91.4577 28.0057 91.3214 28.0341C91.185 28.0653 91.0146 28.0824 90.81 28.0852C90.4748 28.0909 90.1623 28.0312 89.8725 27.9062C89.5827 27.7812 89.3484 27.5881 89.1694 27.3267C88.9904 27.0653 88.9009 26.7372 88.9009 26.3423V19.8864ZM94.8317 28.1449C94.4169 28.1449 94.0419 28.0682 93.7067 27.9148C93.3714 27.7585 93.1058 27.5327 92.9098 27.2372C92.7166 26.9418 92.62 26.5795 92.62 26.1506C92.62 25.7812 92.6911 25.4773 92.8331 25.2386C92.9751 25 93.1669 24.8111 93.4084 24.6719C93.6499 24.5327 93.9197 24.4276 94.218 24.3565C94.5163 24.2855 94.8203 24.2315 95.13 24.1946C95.522 24.1491 95.8402 24.1122 96.0845 24.0838C96.3288 24.0526 96.5064 24.0028 96.6172 23.9347C96.728 23.8665 96.7834 23.7557 96.7834 23.6023V23.5724C96.7834 23.2003 96.6783 22.9119 96.468 22.7074C96.2607 22.5028 95.951 22.4006 95.5391 22.4006C95.1101 22.4006 94.772 22.4957 94.5249 22.6861C94.2805 22.8736 94.1115 23.0824 94.0178 23.3125L92.8203 23.0398C92.9624 22.642 93.1697 22.321 93.4425 22.0767C93.718 21.8295 94.0348 21.6506 94.3928 21.5398C94.7507 21.4261 95.1271 21.3693 95.522 21.3693C95.7834 21.3693 96.0604 21.4006 96.353 21.4631C96.6484 21.5227 96.924 21.6335 97.1797 21.7955C97.4382 21.9574 97.6499 22.1889 97.8146 22.4901C97.9794 22.7884 98.0618 23.1761 98.0618 23.6534V28H96.8175V27.1051H96.7663C96.6839 27.2699 96.5604 27.4318 96.3956 27.5909C96.2308 27.75 96.0192 27.8821 95.7607 27.9872C95.5021 28.0923 95.1925 28.1449 94.8317 28.1449ZM95.1087 27.1222C95.4609 27.1222 95.7621 27.0526 96.0121 26.9134C96.2649 26.7741 96.4567 26.5923 96.5874 26.3679C96.7209 26.1406 96.7876 25.8977 96.7876 25.6392V24.7955C96.7422 24.8409 96.6541 24.8835 96.5234 24.9233C96.3956 24.9602 96.2493 24.9929 96.0845 25.0213C95.9197 25.0469 95.7592 25.071 95.603 25.0938C95.4467 25.1136 95.3161 25.1307 95.2109 25.1449C94.9638 25.1761 94.7379 25.2287 94.5334 25.3026C94.3317 25.3764 94.1697 25.483 94.0476 25.6222C93.9283 25.7585 93.8686 25.9403 93.8686 26.1676C93.8686 26.483 93.9851 26.7216 94.218 26.8835C94.451 27.0426 94.7479 27.1222 95.1087 27.1222ZM99.7589 28V21.4545H100.99V22.4943H101.059C101.178 22.142 101.388 21.8651 101.689 21.6634C101.993 21.4588 102.337 21.3565 102.721 21.3565C102.8 21.3565 102.894 21.3594 103.002 21.3651C103.113 21.3707 103.199 21.3778 103.262 21.3864V22.6051C103.211 22.5909 103.12 22.5753 102.989 22.5582C102.858 22.5384 102.728 22.5284 102.597 22.5284C102.296 22.5284 102.027 22.5923 101.792 22.7202C101.559 22.8452 101.374 23.0199 101.238 23.2443C101.101 23.4659 101.033 23.7187 101.033 24.0028V28H99.7589ZM107.806 21.4545V22.4773H104.231V21.4545H107.806ZM105.19 19.8864H106.464V26.0781C106.464 26.3253 106.501 26.5114 106.575 26.6364C106.649 26.7585 106.744 26.8423 106.86 26.8878C106.98 26.9304 107.109 26.9517 107.248 26.9517C107.35 26.9517 107.44 26.9446 107.517 26.9304C107.593 26.9162 107.653 26.9048 107.696 26.8963L107.926 27.9489C107.852 27.9773 107.747 28.0057 107.61 28.0341C107.474 28.0653 107.304 28.0824 107.099 28.0852C106.764 28.0909 106.451 28.0312 106.162 27.9062C105.872 27.7812 105.637 27.5881 105.458 27.3267C105.279 27.0653 105.19 26.7372 105.19 26.3423V19.8864ZM111.967 28.1321C111.322 28.1321 110.766 27.9943 110.3 27.7188C109.837 27.4403 109.479 27.0497 109.227 26.5469C108.977 26.0412 108.852 25.4489 108.852 24.7699C108.852 24.0994 108.977 23.5085 109.227 22.9972C109.479 22.4858 109.832 22.0866 110.283 21.7997C110.738 21.5128 111.269 21.3693 111.877 21.3693C112.246 21.3693 112.604 21.4304 112.951 21.5526C113.298 21.6747 113.609 21.8665 113.884 22.1278C114.16 22.3892 114.377 22.7287 114.536 23.1463C114.695 23.5611 114.775 24.0653 114.775 24.6591V25.1108H109.572V24.1562H113.526C113.526 23.821 113.458 23.5241 113.322 23.2656C113.185 23.0043 112.994 22.7983 112.746 22.6477C112.502 22.4972 112.215 22.4219 111.886 22.4219C111.528 22.4219 111.215 22.5099 110.948 22.6861C110.684 22.8594 110.479 23.0866 110.335 23.3679C110.192 23.6463 110.121 23.9489 110.121 24.2756V25.0213C110.121 25.4588 110.198 25.831 110.352 26.1378C110.508 26.4446 110.725 26.679 111.004 26.8409C111.282 27 111.607 27.0795 111.979 27.0795C112.221 27.0795 112.441 27.0455 112.64 26.9773C112.839 26.9062 113.011 26.8011 113.156 26.6619C113.3 26.5227 113.411 26.3509 113.488 26.1463L114.694 26.3636C114.597 26.7187 114.424 27.0298 114.174 27.2969C113.927 27.5611 113.616 27.767 113.241 27.9148C112.869 28.0597 112.444 28.1321 111.967 28.1321ZM118.639 28.1278C118.11 28.1278 117.639 27.9929 117.224 27.723C116.812 27.4503 116.488 27.0625 116.252 26.5597C116.02 26.054 115.903 25.4474 115.903 24.7401C115.903 24.0327 116.021 23.4276 116.257 22.9247C116.495 22.4219 116.822 22.0369 117.237 21.7699C117.652 21.5028 118.122 21.3693 118.647 21.3693C119.054 21.3693 119.38 21.4375 119.627 21.5739C119.877 21.7074 120.071 21.8636 120.207 22.0426C120.346 22.2216 120.454 22.3793 120.531 22.5156H120.608V19.2727H121.882V28H120.637V26.9815H120.531C120.454 27.1207 120.343 27.2798 120.199 27.4588C120.056 27.6378 119.86 27.794 119.61 27.9276C119.36 28.0611 119.037 28.1278 118.639 28.1278ZM118.92 27.0412C119.287 27.0412 119.596 26.9446 119.849 26.7514C120.105 26.5554 120.298 26.2841 120.429 25.9375C120.562 25.5909 120.629 25.1875 120.629 24.7273C120.629 24.2727 120.564 23.875 120.433 23.5341C120.302 23.1932 120.11 22.9276 119.858 22.7372C119.605 22.5469 119.292 22.4517 118.92 22.4517C118.537 22.4517 118.217 22.5511 117.961 22.75C117.706 22.9489 117.512 23.2202 117.382 23.5639C117.254 23.9077 117.19 24.2955 117.19 24.7273C117.19 25.1648 117.255 25.5582 117.386 25.9077C117.517 26.2571 117.71 26.5341 117.966 26.7386C118.224 26.9403 118.542 27.0412 118.92 27.0412ZM124.54 28.081C124.307 28.081 124.107 27.9986 123.939 27.8338C123.771 27.6662 123.688 27.4645 123.688 27.2287C123.688 26.9957 123.771 26.7969 123.939 26.6321C124.107 26.4645 124.307 26.3807 124.54 26.3807C124.773 26.3807 124.973 26.4645 125.141 26.6321C125.308 26.7969 125.392 26.9957 125.392 27.2287C125.392 27.3849 125.352 27.5284 125.273 27.6591C125.196 27.7869 125.094 27.8892 124.966 27.9659C124.838 28.0426 124.696 28.081 124.54 28.081ZM124.54 23.3168C124.307 23.3168 124.107 23.233 123.939 23.0653C123.771 22.8977 123.688 22.6974 123.688 22.4645C123.688 22.2315 123.771 22.0327 123.939 21.8679C124.107 21.7003 124.307 21.6165 124.54 21.6165C124.773 21.6165 124.973 21.7003 125.141 21.8679C125.308 22.0327 125.392 22.2315 125.392 22.4645C125.392 22.6207 125.352 22.7642 125.273 22.8949C125.196 23.0227 125.094 23.125 124.966 23.2017C124.838 23.2784 124.696 23.3168 124.54 23.3168Z" fill="black" fill-opacity="0.65"/>
  <path d="M129.836 24.4034V23.7642C130.316 23.7642 130.651 23.6662 130.841 23.4702C131.032 23.2713 131.127 22.9432 131.127 22.4858V21.2628C131.127 20.8281 131.175 20.4631 131.272 20.1676C131.371 19.8693 131.522 19.6307 131.723 19.4517C131.925 19.2727 132.181 19.1435 132.49 19.0639C132.8 18.9844 133.165 18.9446 133.586 18.9446V19.9545C133.256 19.9545 132.999 20.0028 132.814 20.0994C132.63 20.196 132.5 20.3466 132.426 20.5511C132.355 20.7528 132.32 21.0114 132.32 21.3267V22.8778C132.32 23.0966 132.287 23.2997 132.222 23.4872C132.157 23.6719 132.036 23.8324 131.86 23.9688C131.684 24.1051 131.432 24.2116 131.105 24.2884C130.779 24.3651 130.355 24.4034 129.836 24.4034ZM133.586 29.8153C133.165 29.8153 132.8 29.7756 132.49 29.696C132.181 29.6165 131.925 29.4872 131.723 29.3082C131.522 29.1293 131.371 28.8906 131.272 28.5923C131.175 28.2969 131.127 27.9318 131.127 27.4972V26.2699C131.127 25.8153 131.032 25.4886 130.841 25.2898C130.651 25.0909 130.316 24.9915 129.836 24.9915V24.3565C130.355 24.3565 130.779 24.3949 131.105 24.4716C131.432 24.5455 131.684 24.652 131.86 24.7912C132.036 24.9276 132.157 25.0895 132.222 25.277C132.287 25.4616 132.32 25.6634 132.32 25.8821V27.4332C132.32 27.7457 132.355 28.0028 132.426 28.2045C132.5 28.4091 132.63 28.5597 132.814 28.6562C132.999 28.7557 133.256 28.8054 133.586 28.8054V29.8153ZM129.836 24.9915V23.7642H131.016V24.9915H129.836ZM134.81 30.4545V21.4545H136.054V22.5156H136.161C136.234 22.3793 136.341 22.2216 136.48 22.0426C136.619 21.8636 136.813 21.7074 137.06 21.5739C137.307 21.4375 137.634 21.3693 138.04 21.3693C138.568 21.3693 139.04 21.5028 139.455 21.7699C139.869 22.0369 140.195 22.4219 140.43 22.9247C140.669 23.4276 140.788 24.0327 140.788 24.7401C140.788 25.4474 140.67 26.054 140.435 26.5597C140.199 27.0625 139.875 27.4503 139.463 27.723C139.051 27.9929 138.581 28.1278 138.053 28.1278C137.655 28.1278 137.33 28.0611 137.077 27.9276C136.827 27.794 136.631 27.6378 136.489 27.4588C136.347 27.2798 136.237 27.1207 136.161 26.9815H136.084V30.4545H134.81ZM136.058 24.7273C136.058 25.1875 136.125 25.5909 136.259 25.9375C136.392 26.2841 136.585 26.5554 136.838 26.7514C137.091 26.9446 137.401 27.0412 137.767 27.0412C138.148 27.0412 138.466 26.9403 138.722 26.7386C138.977 26.5341 139.17 26.2571 139.301 25.9077C139.435 25.5582 139.501 25.1648 139.501 24.7273C139.501 24.2955 139.436 23.9077 139.305 23.5639C139.178 23.2202 138.984 22.9489 138.726 22.75C138.47 22.5511 138.151 22.4517 137.767 22.4517C137.398 22.4517 137.085 22.5469 136.83 22.7372C136.577 22.9276 136.385 23.1932 136.254 23.5341C136.124 23.875 136.058 24.2727 136.058 24.7273ZM142.216 28V21.4545H143.447V22.4943H143.516C143.635 22.142 143.845 21.8651 144.146 21.6634C144.45 21.4588 144.794 21.3565 145.178 21.3565C145.257 21.3565 145.351 21.3594 145.459 21.3651C145.57 21.3707 145.656 21.3778 145.719 21.3864V22.6051C145.668 22.5909 145.577 22.5753 145.446 22.5582C145.315 22.5384 145.185 22.5284 145.054 22.5284C144.753 22.5284 144.484 22.5923 144.249 22.7202C144.016 22.8452 143.831 23.0199 143.695 23.2443C143.558 23.4659 143.49 23.7187 143.49 24.0028V28H142.216ZM149.344 28.1321C148.73 28.1321 148.195 27.9915 147.738 27.7102C147.28 27.429 146.925 27.0355 146.672 26.5298C146.419 26.0241 146.293 25.4332 146.293 24.7571C146.293 24.0781 146.419 23.4844 146.672 22.9759C146.925 22.4673 147.28 22.0724 147.738 21.7912C148.195 21.5099 148.73 21.3693 149.344 21.3693C149.958 21.3693 150.493 21.5099 150.951 21.7912C151.408 22.0724 151.763 22.4673 152.016 22.9759C152.269 23.4844 152.395 24.0781 152.395 24.7571C152.395 25.4332 152.269 26.0241 152.016 26.5298C151.763 27.0355 151.408 27.429 150.951 27.7102C150.493 27.9915 149.958 28.1321 149.344 28.1321ZM149.348 27.0625C149.746 27.0625 150.076 26.9574 150.337 26.7472C150.598 26.5369 150.792 26.2571 150.917 25.9077C151.044 25.5582 151.108 25.1733 151.108 24.7528C151.108 24.3352 151.044 23.9517 150.917 23.6023C150.792 23.25 150.598 22.9673 150.337 22.7543C150.076 22.5412 149.746 22.4347 149.348 22.4347C148.948 22.4347 148.615 22.5412 148.351 22.7543C148.09 22.9673 147.895 23.25 147.767 23.6023C147.642 23.9517 147.58 24.3352 147.58 24.7528C147.58 25.1733 147.642 25.5582 147.767 25.9077C147.895 26.2571 148.09 26.5369 148.351 26.7472C148.615 26.9574 148.948 27.0625 149.348 27.0625ZM156.575 28.1321C155.941 28.1321 155.396 27.9886 154.938 27.7017C154.484 27.4119 154.134 27.0128 153.89 26.5043C153.646 25.9957 153.523 25.4134 153.523 24.7571C153.523 24.0923 153.648 23.5057 153.898 22.9972C154.148 22.4858 154.501 22.0866 154.955 21.7997C155.41 21.5128 155.945 21.3693 156.562 21.3693C157.059 21.3693 157.502 21.4616 157.891 21.6463C158.281 21.8281 158.594 22.0838 158.833 22.4134C159.075 22.7429 159.218 23.1278 159.263 23.5682H158.023C157.955 23.2614 157.799 22.9972 157.555 22.7756C157.313 22.554 156.989 22.4432 156.583 22.4432C156.228 22.4432 155.917 22.5369 155.65 22.7244C155.386 22.9091 155.18 23.1733 155.032 23.517C154.884 23.858 154.81 24.2614 154.81 24.7273C154.81 25.2045 154.883 25.6165 155.028 25.9631C155.173 26.3097 155.377 26.5781 155.641 26.7685C155.908 26.9588 156.222 27.054 156.583 27.054C156.825 27.054 157.043 27.0099 157.239 26.9219C157.438 26.831 157.604 26.7017 157.738 26.5341C157.874 26.3665 157.969 26.1648 158.023 25.929H159.263C159.218 26.3523 159.08 26.7301 158.85 27.0625C158.62 27.3949 158.312 27.6562 157.925 27.8466C157.542 28.0369 157.092 28.1321 156.575 28.1321ZM163.447 28.1321C162.802 28.1321 162.247 27.9943 161.781 27.7188C161.318 27.4403 160.96 27.0497 160.707 26.5469C160.457 26.0412 160.332 25.4489 160.332 24.7699C160.332 24.0994 160.457 23.5085 160.707 22.9972C160.96 22.4858 161.312 22.0866 161.764 21.7997C162.218 21.5128 162.75 21.3693 163.358 21.3693C163.727 21.3693 164.085 21.4304 164.431 21.5526C164.778 21.6747 165.089 21.8665 165.365 22.1278C165.64 22.3892 165.858 22.7287 166.017 23.1463C166.176 23.5611 166.255 24.0653 166.255 24.6591V25.1108H161.052V24.1562H165.007C165.007 23.821 164.939 23.5241 164.802 23.2656C164.666 23.0043 164.474 22.7983 164.227 22.6477C163.983 22.4972 163.696 22.4219 163.366 22.4219C163.008 22.4219 162.696 22.5099 162.429 22.6861C162.164 22.8594 161.96 23.0866 161.815 23.3679C161.673 23.6463 161.602 23.9489 161.602 24.2756V25.0213C161.602 25.4588 161.679 25.831 161.832 26.1378C161.988 26.4446 162.206 26.679 162.484 26.8409C162.762 27 163.088 27.0795 163.46 27.0795C163.701 27.0795 163.922 27.0455 164.12 26.9773C164.319 26.9062 164.491 26.8011 164.636 26.6619C164.781 26.5227 164.892 26.3509 164.968 26.1463L166.174 26.3636C166.078 26.7187 165.904 27.0298 165.654 27.2969C165.407 27.5611 165.096 27.767 164.721 27.9148C164.349 28.0597 163.924 28.1321 163.447 28.1321ZM172.574 23.0526L171.419 23.2571C171.371 23.1094 171.294 22.9687 171.189 22.8352C171.087 22.7017 170.947 22.5923 170.771 22.5071C170.595 22.4219 170.375 22.3793 170.111 22.3793C169.75 22.3793 169.449 22.4602 169.207 22.6222C168.966 22.7812 168.845 22.9872 168.845 23.2401C168.845 23.4588 168.926 23.6349 169.088 23.7685C169.25 23.902 169.511 24.0114 169.872 24.0966L170.912 24.3352C171.514 24.4744 171.963 24.6889 172.259 24.9787C172.554 25.2685 172.702 25.6449 172.702 26.108C172.702 26.5 172.588 26.8494 172.361 27.1562C172.136 27.4602 171.822 27.6989 171.419 27.8722C171.018 28.0455 170.554 28.1321 170.026 28.1321C169.293 28.1321 168.695 27.9759 168.232 27.6634C167.768 27.348 167.484 26.9006 167.379 26.321L168.611 26.1335C168.688 26.4545 168.845 26.6974 169.084 26.8622C169.322 27.0241 169.634 27.1051 170.017 27.1051C170.435 27.1051 170.768 27.0185 171.018 26.8452C171.268 26.669 171.393 26.4545 171.393 26.2017C171.393 25.9972 171.317 25.8253 171.163 25.6861C171.013 25.5469 170.781 25.4418 170.469 25.3707L169.361 25.1278C168.75 24.9886 168.298 24.767 168.006 24.4631C167.716 24.1591 167.571 23.7741 167.571 23.3082C167.571 22.9219 167.679 22.5838 167.895 22.294C168.111 22.0043 168.409 21.7784 168.79 21.6165C169.17 21.4517 169.607 21.3693 170.098 21.3693C170.805 21.3693 171.362 21.5227 171.768 21.8295C172.175 22.1335 172.443 22.5412 172.574 23.0526ZM179.007 23.0526L177.853 23.2571C177.804 23.1094 177.728 22.9687 177.623 22.8352C177.52 22.7017 177.381 22.5923 177.205 22.5071C177.029 22.4219 176.809 22.3793 176.544 22.3793C176.184 22.3793 175.882 22.4602 175.641 22.6222C175.4 22.7812 175.279 22.9872 175.279 23.2401C175.279 23.4588 175.36 23.6349 175.522 23.7685C175.684 23.902 175.945 24.0114 176.306 24.0966L177.346 24.3352C177.948 24.4744 178.397 24.6889 178.692 24.9787C178.988 25.2685 179.135 25.6449 179.135 26.108C179.135 26.5 179.022 26.8494 178.794 27.1562C178.57 27.4602 178.256 27.6989 177.853 27.8722C177.452 28.0455 176.988 28.1321 176.459 28.1321C175.726 28.1321 175.128 27.9759 174.665 27.6634C174.202 27.348 173.918 26.9006 173.813 26.321L175.044 26.1335C175.121 26.4545 175.279 26.6974 175.517 26.8622C175.756 27.0241 176.067 27.1051 176.451 27.1051C176.868 27.1051 177.202 27.0185 177.452 26.8452C177.702 26.669 177.827 26.4545 177.827 26.2017C177.827 25.9972 177.75 25.8253 177.597 25.6861C177.446 25.5469 177.215 25.4418 176.902 25.3707L175.794 25.1278C175.184 24.9886 174.732 24.767 174.439 24.4631C174.15 24.1591 174.005 23.7741 174.005 23.3082C174.005 22.9219 174.113 22.5838 174.328 22.294C174.544 22.0043 174.843 21.7784 175.223 21.6165C175.604 21.4517 176.04 21.3693 176.532 21.3693C177.239 21.3693 177.796 21.5227 178.202 21.8295C178.608 22.1335 178.877 22.5412 179.007 23.0526ZM183.796 24.3565V24.9915C183.316 24.9915 182.981 25.0909 182.79 25.2898C182.6 25.4886 182.505 25.8153 182.505 26.2699V27.4972C182.505 27.9318 182.455 28.2969 182.356 28.5923C182.259 28.8906 182.11 29.1293 181.908 29.3082C181.707 29.4872 181.451 29.6165 181.141 29.696C180.832 29.7756 180.467 29.8153 180.046 29.8153V28.8054C180.376 28.8054 180.633 28.7557 180.817 28.6562C181.002 28.5597 181.13 28.4091 181.201 28.2045C181.275 28.0028 181.312 27.7457 181.312 27.4332V25.8821C181.312 25.6634 181.344 25.4616 181.41 25.277C181.475 25.0895 181.596 24.9276 181.772 24.7912C181.948 24.652 182.2 24.5455 182.526 24.4716C182.853 24.3949 183.276 24.3565 183.796 24.3565ZM180.046 18.9446C180.467 18.9446 180.832 18.9844 181.141 19.0639C181.451 19.1435 181.707 19.2727 181.908 19.4517C182.11 19.6307 182.259 19.8693 182.356 20.1676C182.455 20.4631 182.505 20.8281 182.505 21.2628V22.4858C182.505 22.9432 182.6 23.2713 182.79 23.4702C182.981 23.6662 183.316 23.7642 183.796 23.7642V24.4034C183.276 24.4034 182.853 24.3651 182.526 24.2884C182.2 24.2116 181.948 24.1051 181.772 23.9688C181.596 23.8324 181.475 23.6719 181.41 23.4872C181.344 23.2997 181.312 23.0966 181.312 22.8778V21.3267C181.312 21.0114 181.275 20.7528 181.201 20.5511C181.13 20.3466 181.002 20.196 180.817 20.0994C180.633 20.0028 180.376 19.9545 180.046 19.9545V18.9446ZM183.796 23.7642V24.9915H182.616V23.7642H183.796Z" fill="black" fill-opacity="0.5"/>
  <path d="M392.333 23.9167L395.667 23.9167V23.0833L392.333 23.0833V23.9167Z" fill="black" fill-opacity="0.3"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M390.467 25.1967L392.085 26.9772C392.243 27.151 392.467 27.25 392.702 27.25H395.298C395.533 27.25 395.757 27.151 395.915 26.9772L397.533 25.1967C397.673 25.0433 397.75 24.8435 397.75 24.6362V22.3638C397.75 22.1565 397.673 21.9567 397.533 21.8033L395.915 20.0228C395.757 19.849 395.533 19.75 395.298 19.75H392.702C392.467 19.75 392.243 19.849 392.085 20.0228L390.467 21.8033C390.327 21.9567 390.25 22.1565 390.25 22.3638V24.6362C390.25 24.8435 390.327 25.0433 390.467 25.1967ZM391.083 22.3638L392.702 20.5833L395.298 20.5833L396.917 22.3638L396.917 24.6362L395.298 26.4167L392.702 26.4167L391.083 24.6362L391.083 22.3638Z" fill="black" fill-opacity="0.3"/>
  <rect x="16" y="41" width="383" height="1" rx="0.5" fill="black" fill-opacity="0.05"/>
  <rect x="16" y="52" width="113" height="22" rx="7" fill="#7A7EFB" fill-opacity="0.2"/>
  <rect x="16" y="52" width="113" height="22" rx="7" fill="url(#paint1_linear_5_2770)" fill-opacity="0.2"/>
  <rect x="16" y="78" width="53" height="22" rx="7" fill="#7A7EFB" fill-opacity="0.2"/>
  <rect x="16" y="78" width="53" height="22" rx="7" fill="url(#paint2_linear_5_2770)" fill-opacity="0.2"/>
  <defs>
  <linearGradient id="paint0_linear_5_2770" x1="10" y1="8.75" x2="42.1928" y2="36.7684" gradientUnits="userSpaceOnUse">
  <stop offset="0.230048" stop-color="#2E7CF6"/>
  <stop offset="0.430048" stop-color="#F200FF" stop-opacity="0.25"/>
  <stop offset="0.615048" stop-color="#FAC145" stop-opacity="0.669964"/>
  </linearGradient>
  <linearGradient id="paint1_linear_5_2770" x1="130" y1="53.5" x2="22.5" y2="70.5" gradientUnits="userSpaceOnUse">
  <stop stop-color="white"/>
  <stop offset="1" stop-color="#7A7EFB"/>
  </linearGradient>
  <linearGradient id="paint2_linear_5_2770" x1="69.469" y1="79.5" x2="18.0705" y2="83.3123" gradientUnits="userSpaceOnUse">
  <stop stop-color="white"/>
  <stop offset="1" stop-color="#7A7EFB"/>
  </linearGradient>
  </defs>
  </svg>
);